<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-gb" lang="en-gb" dir="ltr">
<head>
	  <base href="" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="robots" content="noindex, nofollow" />
  <meta name="keywords" content="messy lab, messylab, ide, assembler, assembly, picocomputer" />
  <meta name="title" content="Subroutine" />
  <meta name="author" content="Miloš Anđelković" />
  <meta name="description" content="Messy Lab - IDE for Assembly Programming Training" />
  <meta name="generator" content="Joomla! 1.5 - Open Source Content Management" />
  <title>Subroutine</title>
  <link href="../../templates/messy_lab/favicon.ico" rel="shortcut icon" type="image/x-icon" />
  <script type="text/javascript" src="../../media/system/js/mootools.js"></script>
  <script type="text/javascript" src="../../media/system/js/caption.js"></script>

	<link rel="stylesheet" href="../../templates/messy_lab/css/template.css" type="text/css" />
</head>
<body class="contentpane">
	
	<table class="contentpaneopen">
<tr>
		<td class="contentheading" width="100%">
					Subroutine			</td>
				<td align="right" width="100%" class="buttonheading">
		<a href="subroutine.html#" onclick="window.print();return false;"><img src="../../images/M_images/printButton.png" alt="Print"  /></a>		</td>
	</tr>
</table>

<table class="contentpaneopen">



<tr>
<td valign="top">
<p>Unlike Branch instructions, subroutine instructions provide a way to return to the address from which the jump was made, by storing the address on the Call Stack. Each use modifies the SP (Stack Pointer) register of the processor.</p>
<p>picoComputer provides two subroutine instructions - one for calling a subroutine, and one for returning from it.</p>
<table class="articletable" border="0">
<tbody>
<tr>
<td style="background-color: transparent;"></td>
<th>OP Code</th><th>Symbolic name</th>
</tr>
<tr>
<th scope="row">Jump to Subroutine<br /></th>
<td>1101</td>
<td>JSR<br /></td>
</tr>
<tr>
<th valign="top" scope="row">Return from Subroutine<br /></th>
<td>1110</td>
<td>RTS</td>
</tr>
</tbody>
</table>
<p> </p>
<p>The format of the JSR instruction is as follows:</p>
<p><code>JSR sub<br /></code></p>
<table class="articletable">
<tbody>
<tr>
<th colspan="4" scope="col">OP Code</th> <th scope="col">i1</th> <th colspan="3" scope="col">a1</th> <th scope="col">i2</th> <th colspan="3" scope="col">a2</th> <th scope="col">i3</th> <th colspan="3" scope="col">a3</th>
</tr>
<tr>
<td>1<br /></td>
<td>1<br /></td>
<td>0<br /></td>
<td>1<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
</tr>
<tr>
<td valign="top">c</td>
<td valign="top">c</td>
<td valign="top">c</td>
<td valign="top">c</td>
<td valign="top">c</td>
<td valign="top">c</td>
<td valign="top">c</td>
<td valign="top">c</td>
<td valign="top">c</td>
<td valign="top">c</td>
<td valign="top">c</td>
<td valign="top">c</td>
<td valign="top">c</td>
<td valign="top">c</td>
<td valign="top">c</td>
<td valign="top">
<p>c</p>
</td>
</tr>
</tbody>
</table>
<p>The jump destination address, <span style="font-family: courier new,courier;"><strong>c</strong></span> is stored in the second word.</p>
<p>In the example, <span style="font-family: courier new,courier;"><strong>sub</strong></span> is a label.</p>
<p> </p>
<p>The RTS instruction is even simpler:</p>
<p><code>RTS<br /></code></p>
<table class="articletable">
<tbody>
<tr>
<th colspan="4" scope="col">OP Code</th> <th scope="col">i1</th> <th colspan="3" scope="col">a1</th> <th scope="col">i2</th> <th colspan="3" scope="col">a2</th> <th scope="col">i3</th> <th colspan="3" scope="col">a3</th>
</tr>
<tr>
<td>1<br /></td>
<td>1<br /></td>
<td>1<br /></td>
<td>0<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
</tr>
</tbody>
</table>
<p>The instruction takes no arguments.</p>
<p> </p>
<p>In both instructions operand fields of the first word are unused and undefined.</p></td>
</tr>

</table>
<span class="article_separator">&nbsp;</span>

</body>
</html>
