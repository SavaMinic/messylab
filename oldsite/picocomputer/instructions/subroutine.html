<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-gb" lang="en-gb" >
<head>
  <base href="" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="robots" content="index, follow" />
  <meta name="keywords" content="messy lab, messylab, ide, assembler, assembly, picocomputer" />
  <meta name="title" content="Subroutine" />
  <meta name="author" content="Miloš Anđelković" />
  <meta name="description" content="Messy Lab - IDE for Assembly Programming Training" />
  <meta name="generator" content="Joomla! 1.5 - Open Source Content Management" />
  <title>Subroutine</title>
  <link href="../../templates/messy_lab/favicon.ico" rel="shortcut icon" type="image/x-icon" />
  <script type="text/javascript" src="../../media/system/js/mootools.js"></script>
  <script type="text/javascript" src="../../media/system/js/caption.js"></script>

<link rel="stylesheet" href="../../templates/system/css/system.css" type="text/css" />
<link rel="stylesheet" href="../../templates/system/css/general.css" type="text/css" />
<link rel="stylesheet" href="../../templates/messy_lab/css/template.css" type="text/css" />
</head>
<body id="page_bg" class="color_red bg_black width_fmax">
<a name="up" id="up"></a>
<div id="wrapper1">
<div id="wrapper2">
<div id="wrapper3">

            <div id="header_small">
        <div id="logo_small" onclick="javascript: window.location.href = 'http://www.messylab.com/'"></div>
      </div>
      
      <div id="tabarea">
        <div id="topmenu_w">
        <table cellpadding="0" cellspacing="0" class="topmenu_t">
          <tr>
            <td class="topmenu_t_m">
              <div id="topmenu">
                <ul class="menu"><li class="item15"><a href="../../messy-lab.html"><span>Messy Lab</span></a></li><li class="active item16"><a href="../../picocomputer.html"><span>picoComputer</span></a></li><li class="item17"><a href="../../download.html"><span>Download</span></a></li><li class="item18"><a href="../../about.html"><span>About</span></a></li></ul>
              </div>
            </td>
          </tr>
        </table>
        </div>
        <div id="pathway">
          <span class="breadcrumbs pathway">
<a href="../../index.html" class="pathway">Home</a> <img src="../../templates/messy_lab/images/arrow.png" alt=""  /> <a href="../../picocomputer.html" class="pathway">picoComputer</a> <img src="../../templates/messy_lab/images/arrow.png" alt=""  /> <a href="../instructions.html" class="pathway">Instructions</a> <img src="../../templates/messy_lab/images/arrow.png" alt=""  /> Subroutine</span>

        </div>
      </div>
      
      <div class="clr"></div>
      
      <div id="whitebox">
        <div id="area">
          
          
          <div id="leftcolumn">
                        		<div class="module">
			<div>
				<div>
					<div>
													<h3>Navigation</h3>
											<ul class="menu"><li class="item1"><a href="../../index.html"><span>Home</span></a></li><li class="item11"><a href="../../messy-lab.html"><span>Messy Lab</span></a></li><li class="parent active item12"><a href="../../picocomputer.html"><span>picoComputer</span></a><ul><li class="item19"><a href="../architecture.html"><span>Architecture</span></a></li><li class="item22"><a href="../syntax.html"><span>Syntax</span></a></li><li class="parent active item20"><a href="../instructions.html"><span>Instructions</span></a><ul><li class="item21"><a href="move.html"><span>Move</span></a></li><li class="item23"><a href="arithmetic.html"><span>Arithmetic</span></a></li><li class="item24"><a href="branch.html"><span>Branch</span></a></li><li class="item25"><a href="io.html"><span>I/O</span></a></li><li id="current" class="active item26"><a href="subroutine.html"><span>Subroutine</span></a></li><li class="item27"><a href="stop.html"><span>Stop</span></a></li></ul></li></ul></li><li class="item13"><a href="../../download.html"><span>Download</span></a></li><li class="item14"><a href="../../about.html"><span>About</span></a></li></ul>					</div>
				</div>
			</div>
		</div>
			<div class="module">
			<div>
				<div>
					<div>
													<h3>Search</h3>
											<form action="http://www.messylab.com/picocomputer/instructions/index.php" method="post">
	<div class="search">
		<input name="searchword" id="mod_search_searchword" maxlength="20" alt="Search" class="inputbox" type="text" size="20" value="search..."  onblur="if(this.value=='') this.value='search...';" onfocus="if(this.value=='search...') this.value='';" />	</div>
	<input type="hidden" name="task"   value="search" />
	<input type="hidden" name="option" value="com_search" />
	<input type="hidden" name="Itemid" value="26" />
</form>					</div>
				</div>
			</div>
		</div>
	
                      </div>

                    <div id="maincolumn">
                                  
            <table class="nopad">
              <tr valign="top">
                <td><table class="contentpaneopen">
<tr>
		<td class="contentheading" width="100%">
					Subroutine			</td>
				
				<td align="right" width="100%" class="buttonheading">
		<a href="subroutine@tmpl=component&amp;print=1&amp;page=.html" title="Print" onclick="window.open(this.href,'win2','status=no,toolbar=no,scrollbars=yes,titlebar=no,menubar=no,resizable=yes,width=640,height=480,directories=no,location=no'); return false;" rel="nofollow"><img src="../../images/M_images/printButton.png" alt="Print"  /></a>		</td>
		
					</tr>
</table>

<table class="contentpaneopen">



<tr>
<td valign="top">
<p>Unlike Branch instructions, subroutine instructions provide a way to return to the address from which the jump was made, by storing the address on the Call Stack. Each use modifies the SP (Stack Pointer) register of the processor.</p>
<p>picoComputer provides two subroutine instructions - one for calling a subroutine, and one for returning from it.</p>
<table class="articletable" border="0">
<tbody>
<tr>
<td style="background-color: transparent;"></td>
<th>OP Code</th><th>Symbolic name</th>
</tr>
<tr>
<th scope="row">Jump to Subroutine<br /></th>
<td>1101</td>
<td>JSR<br /></td>
</tr>
<tr>
<th valign="top" scope="row">Return from Subroutine<br /></th>
<td>1110</td>
<td>RTS</td>
</tr>
</tbody>
</table>
<p> </p>
<p>The format of the JSR instruction is as follows:</p>
<p><code>JSR sub<br /></code></p>
<table class="articletable">
<tbody>
<tr>
<th colspan="4" scope="col">OP Code</th> <th scope="col">i1</th> <th colspan="3" scope="col">a1</th> <th scope="col">i2</th> <th colspan="3" scope="col">a2</th> <th scope="col">i3</th> <th colspan="3" scope="col">a3</th>
</tr>
<tr>
<td>1<br /></td>
<td>1<br /></td>
<td>0<br /></td>
<td>1<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
</tr>
<tr>
<td valign="top">c</td>
<td valign="top">c</td>
<td valign="top">c</td>
<td valign="top">c</td>
<td valign="top">c</td>
<td valign="top">c</td>
<td valign="top">c</td>
<td valign="top">c</td>
<td valign="top">c</td>
<td valign="top">c</td>
<td valign="top">c</td>
<td valign="top">c</td>
<td valign="top">c</td>
<td valign="top">c</td>
<td valign="top">c</td>
<td valign="top">
<p>c</p>
</td>
</tr>
</tbody>
</table>
<p>The jump destination address, <span style="font-family: courier new,courier;"><strong>c</strong></span> is stored in the second word.</p>
<p>In the example, <span style="font-family: courier new,courier;"><strong>sub</strong></span> is a label.</p>
<p> </p>
<p>The RTS instruction is even simpler:</p>
<p><code>RTS<br /></code></p>
<table class="articletable">
<tbody>
<tr>
<th colspan="4" scope="col">OP Code</th> <th scope="col">i1</th> <th colspan="3" scope="col">a1</th> <th scope="col">i2</th> <th colspan="3" scope="col">a2</th> <th scope="col">i3</th> <th colspan="3" scope="col">a3</th>
</tr>
<tr>
<td>1<br /></td>
<td>1<br /></td>
<td>1<br /></td>
<td>0<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
<td>?<br /></td>
</tr>
</tbody>
</table>
<p>The instruction takes no arguments.</p>
<p> </p>
<p>In both instructions operand fields of the first word are unused and undefined.</p></td>
</tr>

</table>
<span class="article_separator">&nbsp;</span>

                  </td>
                              </tr>
            </table>
          </div>
          <div class="clr"></div>
        </div>

        <div class="clr"></div>
      </div>
      
      <!--<div id="footerspacer"></div>-->
      <div id="footer">
        <div id="footer_l">
          <div id="footer_r">
            <p id="syndicate">
              
            </p>
            <p id="power_by">
			Copyright &copy; 2010-2016. Miloš Anđelković. Powered by <a href="http://www.joomla.org">Joomla!</a>. Valid <a href="http://validator.w3.org/check/referer">XHTML</a> and <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3">CSS</a>.
            </p>
          </div>
        </div>
      </div>

</div>
</div>
</div>

</body>
</html>
